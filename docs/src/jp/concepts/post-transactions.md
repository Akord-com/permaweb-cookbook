---
locale: jp
---
## トランザクションの投稿

Arweaveにトランザクションを投稿する方法はいくつかあります。それぞれの方法には独自の利点と制約があります。以下の図は、トランザクションを投稿するための4つの主要なアプローチを示しています。

`Direct to Peer`（ピアに直接）、`Direct to Gateway`（ゲートウェイに直接）、`Bundled`（バンドル）、および `Dispatched`（ディスパッチ）。

<img src="https://arweave.net/Z1eDDnz4kqxAkkzy6p5elMz-jKnlaVIletp-Tm6W8kQ" width="550">

::: tip <img src="https://arweave.net/blzzObMx8QvyrPTdLPGV3m-NsnJ-QqBzvQIQzzZEfIk" width="20"> 保証されたトランザクション
大量のトランザクションを投稿する場合や、高速な決済時間が必要な場合は、バンドルサービスの使用を検討してください。バンドラは大量のトランザクションを直ちに処理し、トランザクションデータをミリ秒単位で利用可能にします。バンドルサービスは、トランザクションがオンチェーンで確認されるまで投稿されたトランザクションを保持します。もしトランザクションが最新のブロックに含まれていない場合は、バンドルサービスは新しいブロックごとに再投稿し、十分な数の確認とともにチェーン上に記録されるまで繰り返し投稿します。
:::

## 直接のトランザクション

Arweaveに直接投稿されるトランザクションには、**ウォレット間**のトランザクションと**データ**トランザクションの2つの種類があります。最初のウォレット間トランザクションは、ウォレットアドレス間で**AR**トークンを送信します。2番目のデータトランザクションは、データをArweaveに投稿し、関連するストレージコストを支払います。

興味深いことに、データトランザクションでは、同時にウォレットアドレスに**AR**トークンを送信しながら、ストレージコストも支払うことができます。

すべてのトランザクションは、[カスタムタグ](./tags.md)の形式で最大2KBのメタデータを指定することができます。

### 直接ピアへ

トランザクションは、Arweaveのピア（マイニングノード）に直接投稿することができます。クライアントはどのピアに投稿するかを選択できるため、これはおそらく最も分散化されたトランザクションの投稿手段です。

このアプローチには欠点もあります。ピアは起動と停止が頻繁に発生するため、アプリからの信頼性のあるトランザクションの投稿は困難になる場合があります。アプリから投稿する前にアクティブなピアのリストを問い合わせて1つを選択することは可能ですが、このプロセスにはオーバーヘッドと摩擦が発生します。また、ピアに投稿されたトランザクションは、ブロック内でマイニングされた後にゲートウェイでクエリ可能になります。これにより、トランザクションをピアに投稿してからブラウザからゲートウェイで読み込むまでに1〜2分の遅延が発生します。

これらの理由から、開発者は、直接トランザクションを投稿する場合には`arweave-js`をゲートウェイに設定する傾向があります。楽観的なキャッシュにより、ゲートウェイはトランザクションをほぼ即時に利用できるようになります。

### ゲートウェイへのダイレクト

ゲートウェイはクライアントとArweaveのピアネットワークの間に存在します。ゲートウェイの主な機能の1つは、トランザクションをインデックス化し、ネットワークに投稿されたデータを楽観的にキャッシュすることです。これにより、トランザクションは「ペンディング」の状態でほぼ即座にクエリ可能になり、ゲートウェイ上で構築されたアプリケーションがより反応性を持つことができます。ただし、ピアによってブロックにマイニングされなかった場合、楽観的なキャッシュからトランザクションが削除されるリスクもあります。

`arweave-js`を使用して直接トランザクションを投稿する方法の例は、[このガイド](../guides/posting-transactions/arweave-js.md)にあります。

## バンドルされたトランザクション

Permawebのビルダーに追加のユーティリティを提供するArweaveをベースとしたサービスは、パーマウェブサービスと呼ばれることがあります。バンドラはそのようなサービスの1つです。バンドラは複数の個別のトランザクションを取り、それらを1つのトランザクションにまとめて直接Arweaveに投稿します。この方法で、プロトコルレベルでの1つのトランザクションには数万ものバンドルトランザクションが含まれることがあります。ただし、**ウォレット間**トランザクション（ウォレットアドレス間で**AR**トークンを転送するトランザクション）は、各々個別のトランザクションとして直接Arweaveに投稿する必要があります。

[bundlr.network](https://bundlr.network)などのバンドリングサービスを使用する場合、トランザクションを投稿する前に使用するバンドラノードに小額のデポジットをする必要があります。これにより、バンドラサービスは**AR**トークンの転送をArweave上で直接解決するオーバーヘッドなしで、多数の小（または大）アップロードの料金を請求することができます。

[bundlr.network](https://bundlr.network)では、[サポートされている暗号通貨](https://docs.bundlr.network/docs/currencies)でデポジットを行うことができます。

::: info
トランザクションがbundlr.networkに投稿されると、接続されたゲートウェイの楽観的なキャッシュにも表示されるため、数ミリ秒でクエリ可能になります。
:::

`bundlr.network/client`を使用してバンドルトランザクションを投稿する方法の例は、[このガイド](../guides/posting-transactions/bundlr.md)にあります。

## ディスパッチされたトランザクション

バンドルトランザクションを投稿する別の方法は、ブラウザからです。ブラウザはアップロードできるデータのサイズに制約を課していますが、ブラウザベースのウォレットはトランザクションをバンドラに投稿することができます。 Arweaveブラウザウォレットは`dispatch()`APIメソッドを実装しています。トランザクションが小さい（100KB以下）場合は、ウォレットの`dispatch()`メソッドを使用してバンドルトランザクションを利用することができます。`bundlr.network/client`がアプリケーションと一緒にパッケージ化されていない場合でも、利用できます。

100KB以下のバンドルトランザクションをArweaveウォレットの`dispatch()`メソッドを使用して投稿する方法の例は、[このガイド](../guides/posting-transactions/dispatch.md)にあります。

## リソース

- [arweave-js（例）](../guides/posting-transactions/arweave-js.md)
- [bundlr.network（例）](../guides/posting-transactions/bundlr.md)
- [dispatch（例）](../guides/posting-transactions/dispatch.md)